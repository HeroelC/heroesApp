import{A as K,B as Q,C as X,X as Y,Y as M,Z,c as U,e as b,g as y,h as k,i as D,m as T,n as u,o as G,p as A,q as V,r as d,s as q,t as z,u as B,v as L,w as W,x as $,z as J}from"./chunk-AWEVEOPD.js";import{Fb as S,Gc as j,Hb as R,Ra as N,Sb as n,Ta as m,Tb as C,Ua as p,Z as h,ga as v,ha as g,jb as E,nb as c,sb as x,tb as I,ub as P,vb as F,wb as o,xb as i,yb as s}from"./chunk-CLD7H7M4.js";function ne(t,a){if(t&1&&(o(0,"mat-option",12),n(1),i()),t&2){let e=a.$implicit;c("value",e.value),m(),C(e.description)}}var w=class t{constructor(a,e,r){this.heroesService=a;this.route=e;this.notification=r}heroe=null;form;loading=!1;types=[{value:"hero",description:"Hero"},{value:"villain",description:"Villain"}];ngOnInit(){this.form=new V({name:new d(this.heroe?.name??"",[u.required,u.minLength(2)]),description:new d(this.heroe?.description??""),power:new d(this.heroe?.power??null),img:new d(this.heroe?.img??"",[u.required]),type:new d(this.heroe?.type??null,[u.required])})}createOrUpdate(){this.form.valid?this.heroe?.id?this.update():this.create():this.notification.showWarning("Por favor, complete los campos requeridos")}back(){this.route.navigate(["/"])}create(){this.loading=!0,this.heroesService.create(this.form.value).subscribe({next:()=>{this.notification.showSuccess("Heroe creado correctamente"),this.loading=!1,this.route.navigate(["/"])},error:()=>{this.loading=!1,this.notification.showError("Error al crear el heroe")}})}update(){this.heroe?.id&&(this.loading=!0,this.heroesService.update(this.heroe.id,this.form.value).subscribe({next:()=>{this.notification.showSuccess("Heroe actualizado correctamente"),this.loading=!1,this.route.navigate(["/"])},error:()=>{this.loading=!1,this.notification.showError("Error al actualizar el heroe")}}))}static \u0275fac=function(e){return new(e||t)(p(M),p(b),p(Z))};static \u0275cmp=v({type:t,selectors:[["app-create-or-update-heroe"]],inputs:{heroe:"heroe"},decls:34,vars:4,consts:[[1,"border-form","p-20",3,"formGroup"],[1,"d-flex","form"],[1,"avatar-input"],[1,"text-center"],["onerror","this.onerror=null;this.src='default.png'",1,"img-preview",3,"src"],["appearance","outline",1,"form-input"],["matInput","","formControlName","img"],[1,"form-inputs-general"],["matInput","","formControlName","name"],["matInput","","formControlName","description"],["matInput","","formControlName","power"],["formControlName","type"],[3,"value"],[1,"w-100","m-t-40"],[1,"d-flex","justify-content-center"],["mat-stroked-button","",1,"m-w-120",3,"click","disabled"],["mat-flat-button","",1,"m-w-120","m-l-8",3,"click","disabled"]],template:function(e,r){if(e&1&&(o(0,"form",0)(1,"div",1)(2,"div",2)(3,"figure",3),s(4,"img",4),i(),o(5,"mat-form-field",5)(6,"mat-label"),n(7,"Avatar"),i(),s(8,"input",6),i()(),o(9,"div",7)(10,"mat-form-field",5)(11,"mat-label"),n(12,"Nombre"),i(),s(13,"input",8),i(),o(14,"mat-form-field",5)(15,"mat-label"),n(16,"Descripci\xF3n"),i(),s(17,"input",9),i(),o(18,"mat-form-field",5)(19,"mat-label"),n(20,"Poder"),i(),s(21,"input",10),i(),o(22,"mat-form-field",5)(23,"mat-label"),n(24,"Tipo"),i(),o(25,"mat-select",11),P(26,ne,2,2,"mat-option",12,I),i()()()(),o(28,"div",13)(29,"div",14)(30,"button",15),S("click",function(){return r.back()}),n(31,"Volver"),i(),o(32,"button",16),S("click",function(){return r.createOrUpdate()}),n(33,"Guardar"),i()()()()),e&2){let l;c("formGroup",r.form),m(4),c("src",(l=(l=r.form.get("img"))==null?null:l.value)!==null&&l!==void 0?l:"default.png",N),m(22),F(r.types),m(4),c("disabled",r.loading),m(2),c("disabled",r.loading)}},dependencies:[D,K,J,$,X,k,q,T,G,A,z,B],styles:["[_nghost-%COMP%]   .border-form[_ngcontent-%COMP%]{box-shadow:0 10px 15px -3px #0000001a;border-radius:16px}[_nghost-%COMP%]   .form[_ngcontent-%COMP%]{flex-direction:column}@media screen and (min-width: 1280px){[_nghost-%COMP%]   .form[_ngcontent-%COMP%]{flex-direction:row;justify-content:space-between}}@media screen and (min-width: 1280px){[_nghost-%COMP%]   .avatar-input[_ngcontent-%COMP%]{width:100%;max-width:500px}}[_nghost-%COMP%]   .img-preview[_ngcontent-%COMP%]{width:100px;height:100px}[_nghost-%COMP%]   .form-input[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]   .m-w-120[_ngcontent-%COMP%]{min-width:120px}@media screen and (min-width: 1280px){[_nghost-%COMP%]   .m-w-120[_ngcontent-%COMP%]{min-width:260px}}"]})};function me(t,a){if(t&1&&s(0,"app-create-or-update-heroe",0),t&2){let e=R();c("heroe",e.heroe)}}function le(t,a){t&1&&(o(0,"div",1)(1,"div"),s(2,"mat-spinner"),o(3,"p",2),n(4,"Cargando..."),i()()())}var f=class t{constructor(a,e,r){this.route=a;this.heroService=e;this.router=r;this.route.params.subscribe(l=>{this.loading=!0;let O=l.id;O?this.heroService.getById(O).subscribe({next:te=>{this.heroe=te,this.title="Editando heroe",this.loading=!1},error:()=>{this.router.navigate(["/404"])}}):(this.title="Creando nuevo heroe",this.loading=!1)})}title="";heroe=null;loading=!1;static \u0275fac=function(e){return new(e||t)(p(U),p(M),p(b))};static \u0275cmp=v({type:t,selectors:[["app-heroe"]],decls:4,vars:3,consts:[[3,"heroe"],[1,"d-flex","justify-content-center"],[1,"m-t-40"]],template:function(e,r){e&1&&(o(0,"h1"),n(1),i(),E(2,me,1,1,"app-create-or-update-heroe",0)(3,le,5,0,"div",1)),e&2&&(m(),C(r.title),m(),x(r.loading?-1:2),m(),x(r.loading?3:-1))},dependencies:[Q,w]})};var se=[{path:"",component:f},{path:":id",component:f}],_=class t{static \u0275fac=function(e){return new(e||t)};static \u0275mod=g({type:t});static \u0275inj=h({imports:[y.forChild(se),y]})};var ee=class t{static \u0275fac=function(e){return new(e||t)};static \u0275mod=g({type:t});static \u0275inj=h({imports:[j,_,Y,L,W]})};export{ee as HeroeModule};
